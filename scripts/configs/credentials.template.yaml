# Credentials and local file configuration template
# Copy to credentials.yaml and fill values where needed

apis:
  meddra:
    token: "YOUR_MEDDRA_TOKEN"
    base_url: "https://mapisbx.meddra.org/api"
    version: "27.0"
  mesh:
    enable_api: false # Set true to allow MeSH API tree-number calls (offline is default)
    base_url: "https://id.nlm.nih.gov/mesh"
  snomed:
    base_url: "https://snowstorm.mi-x.nl/"
    # Optional: branch to use for versioned browsing (e.g., MAIN or MAIN/SNOMEDCT-US/2024-09-01)
    # If omitted, falls back to versions.SNOMED_branch or GLOBAL_VERSION_OVERRIDE or 'MAIN'
    branch: ""
  loinc:
    base_url: "https://fhir.loinc.org"
    username: ""
    password: ""

local_files:
  mesh:
    xml_file: "desc2025.xml"
    pickle_cache: "mesh_tree_map_2025.pkl"
  nci:
    owl_file: "Thesaurus.owl"
  hpo:
    obo_file: "hp.obo"
  go:
    obo_file: "go-basic.obo"
  lcsh:
    jsonld_file: "subjects.skosrdf.jsonld"
  icd:
    # Files are resolved relative to MedPath/path_data
    icd9_long: "ICD-9-CM-v32-master-descriptions/CMS32_DESC_LONG_DX.txt"
    icd9_short: "ICD-9-CM-v32-master-descriptions/CMS32_DESC_SHORT_DX.txt"
    icd10_file: "icd10cm-Code Descriptions-2026/icd10cm-codes-2026.txt"

versions:
  # Optional global override consumed by some extractors. If set, used as fallback.
  GLOBAL_VERSION_OVERRIDE: ""
  # SNOMED: prefer a concrete branch path understood by Snowstorm, e.g. 'MAIN' or 'MAIN/SNOMEDCT-US/2024-09-01'
  SNOMED_branch: ""
  # LOINC: FHIR CodeSystem systemVersion (e.g., '2.77')
  LOINC_version: ""

# Runtime behavior toggles
early_stopping_vocabs: ["SNOMED_CT"]

# To obtain MedDRA token, run:
# curl --request POST \
#   --data "grant_type=password" \
#   --data "username=25366" \
#   --data "password=pJ24KmEk6534GYM79s9P" \
#   --data "scope=meddraapi" \
#   --data "client_id=mspclient" \
#   "https://mid.meddra.org/connect/token"

rate_limits:
  snomed: 0.3  # seconds between requests - tested optimal rate for SNOMED v2
  mesh: 0.2
  meddra: 0.25
  loinc: 0.25
  ncbi: 0.2
  default: 0.1

timeouts:
  api_timeout: 30  # seconds
  processing_timeout: 300  # seconds per CUI
  
error_handling:
  max_retries: 5  # Increased for SNOMED v2 robustness
  retry_delay: 1.0  # seconds, with exponential backoff
  max_path_length: 200  # increased for comprehensive paths
  max_paths_per_code: 2000  # increased for complex hierarchies

optimization:
  enable_early_stopping: false  # Disabled for SNOMED v2 comprehensive extraction
  early_stopping_vocabs: ["SNOMED_CT_V2"]  # Updated for v2 extractor
  collect_all_paths: true  # Collect paths from ALL codes for comprehensive coverage
  snomed_max_iterations: 1000  # Optimized based on testing
  snomed_timeout_per_code: 300  # Increased timeout for complex hierarchies
  enable_caching: true  # Enable performance caching in v2 extractor